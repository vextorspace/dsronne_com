{% extends 'dsronne_com/base.html' %}

{% block title %}Navajo{% endblock %}

{% block content %}
    <h1>Navajo Wisdom</h1>
    <h2>Disclaimer</h2>
    I believe asking ChatGPT to behave like a Navajo would be a disrespectful act. It would be a Navajo skin on top of
    an english construct. However, there is a lot of knowledge available on the internet. ChatGPT is very good at
    acting like the librarian to find this. I have done my best to create a prompt that prevents my librarian from
    applying its own english bias to the responses and limit it to only providing you the Navajo source that offers the
    knowledge you are looking for.

    Ultimately I would like to make an archival tool which allows the Navajo to curate the information offered up by the
    archivist, and also to create an actual AI trained ground up with Navajo knowledge.
    <h2>Ask the librarian</h2>
    <form id="navajoForm" method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="Ask">
    </form>
    <div class="loading-dots" id="loadingDots"></div>
    <div class="answer-section" id="answerSection"></div>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        const form = document.getElementById('navajoForm');
        const loadingDots = document.getElementById('loadingDots');
        const answerSection = document.getElementById('answerSection');

        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // Show loading animation
            loadingDots.style.display = 'block';
            answerSection.style.display = 'none';

            const formData = new FormData(this);

            fetch(this.action || window.location.href, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': formData.get('csrfmiddlewaretoken')
                }
            })
            .then(response => response.json())
            .then(data => {
                loadingDots.style.display = 'none';
                answerSection.style.display = 'block';
                answerSection.innerHTML = data.result;
            })
            .catch(error => {
                console.error('Error:', error);
                loadingDots.style.display = 'none';
                answerSection.innerHTML = 'An error occurred while processing your request.';
                answerSection.style.display = 'block';
            });
        });
    });
    </script>
{% endblock %}